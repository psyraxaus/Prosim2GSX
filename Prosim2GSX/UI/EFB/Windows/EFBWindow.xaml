<Window x:Class="Prosim2GSX.UI.EFB.Windows.EFBWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Prosim2GSX.UI.EFB.Windows"
        mc:Ignorable="d"
        Title="Electronic Flight Bag" 
        Height="768" 
        Width="1024" 
        MinHeight="600" 
        MinWidth="800"
        Background="{StaticResource BackgroundColor}"
        Foreground="{StaticResource ForegroundColor}"
        WindowStartupLocation="CenterScreen"
        Loaded="Window_Loaded"
        Closing="Window_Closing">
    
    <Window.Resources>
        <!-- Window control button style -->
        <Style x:Key="WindowControlButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="46"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Foreground" Value="{StaticResource ForegroundColor}"/>
            <Setter Property="FontFamily" Value="Segoe MDL2 Assets, Arial, sans-serif"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Margin" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource ButtonHoverColor}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource ButtonPressedColor}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Custom title bar -->
        <Grid x:Name="TitleBar" 
              Grid.Row="0" 
              Background="{DynamicResource HeaderColor}" 
              MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <!-- Logo and title -->
            <StackPanel Grid.Column="0" 
                        Orientation="Horizontal" 
                        Margin="10,0,0,0">
                <Image x:Name="LogoImage" 
                       Width="24" 
                       Height="24" 
                       Margin="0,0,10,0"
                       VerticalAlignment="Center"/>
                <TextBlock Text="Electronic Flight Bag" 
                           FontSize="{DynamicResource HeaderFontSize}" 
                           FontFamily="{DynamicResource HeaderFontFamily}" 
                           VerticalAlignment="Center"/>
            </StackPanel>
            
            <!-- Window controls -->
            <Button x:Name="DetachButton" 
                    Grid.Column="2" 
                    Content="&#xE8A7;" 
                    Style="{StaticResource WindowControlButtonStyle}" 
                    ToolTip="Detach to secondary monitor"
                    Click="DetachButton_Click"/>
            <Button x:Name="MinimizeButton" 
                    Grid.Column="3" 
                    Content="&#xE921;" 
                    Style="{StaticResource WindowControlButtonStyle}" 
                    ToolTip="Minimize"
                    Click="MinimizeButton_Click"/>
            <Button x:Name="CloseButton" 
                    Grid.Column="4" 
                    Content="&#xE8BB;" 
                    Style="{StaticResource WindowControlButtonStyle}" 
                    ToolTip="Close"
                    Click="CloseButton_Click"/>
        </Grid>
        
        <!-- Main content area -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- Navigation tabs -->
            <StackPanel x:Name="NavigationPanel" 
                        Grid.Column="0" 
                        Width="60" 
                        Background="{DynamicResource SecondaryColor}">
                <!-- Navigation buttons will be added here programmatically -->
            </StackPanel>
            
            <!-- Page content -->
            <ContentControl x:Name="PageContent" 
                            Grid.Column="1" 
                            Margin="0"/>
        </Grid>
        
        <!-- Status bar -->
        <Grid Grid.Row="2" 
              Background="{DynamicResource SecondaryColor}" 
              Height="24">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <TextBlock x:Name="StatusText" 
                       Grid.Column="0" 
                       Text="Ready" 
                       Margin="10,0" 
                       VerticalAlignment="Center" 
                       FontSize="{DynamicResource SmallFontSize}"/>
            
            <StackPanel Grid.Column="1" 
                        Orientation="Horizontal" 
                        VerticalAlignment="Center" 
                        Margin="0,0,10,0">
                <TextBlock Text="Airline:" 
                           Margin="0,0,5,0" 
                           VerticalAlignment="Center" 
                           FontSize="{DynamicResource SmallFontSize}"/>
                <ComboBox x:Name="AirlineSelector" 
                          Width="120" 
                          Height="20" 
                          VerticalAlignment="Center"
                          SelectionChanged="AirlineSelector_SelectionChanged"/>
            </StackPanel>
            
            <TextBlock x:Name="TimeText" 
                       Grid.Column="2" 
                       Text="00:00:00" 
                       Margin="10,0" 
                       VerticalAlignment="Center" 
                       FontSize="{DynamicResource SmallFontSize}"/>
        </Grid>
    </Grid>
</Window>
